<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Modyfikuj</title>

  <script src="js/handlebars-v4.1.2.js"></script>
  <script src="js/jquery-3.4.1.js"></script>


  </head>
<body>

  <div id = "obywatel"></div>
  <!--<form id = "formularz">
    nr dowodu: <br>
    <input type = "text " name = "nr_dowodu" ><br>
    imie: <br>
    <input type = "text " name = "imie" ><br>
    nazwisko: <br>
    <input type = "text " name = "nazwisko" ><br>
    adres: <br>
    <input type = "text " name = "adres" ><br>
    data urodzenia: <br>
    <input type = "date " name = "data_urodzenia" ><br>
    pesel:<br>
    <input type = "text " name = "pesel" ><br><br>
    <input type = "submit" value = "Zatwierdź">


  </form>-->
  <form id = "formularz"></form>

  <div id = "obywatel2"></div>


  <script type="text/javascript">



    var obywatelDane = "<p>identyfikator to: {{id}}   data utworzenia to:   {{kiedy_utworzono}}   " +
      "data ostatniej modyfikacji to   {{kiedy_zmodyfikowano}}   numer dowodu    {{nr_dowodu}}   imie to   {{imie}}   " +
      "nazwisko to   {{nazwisko}}   adres to   {{adres}}   aktualny to    {{czy_zarchiwizowany}}   " +
      "data urodzenia to    {{data_urodzenia}}   pesel to   {{pesel}}    </p>";

    template = Handlebars.compile(obywatelDane);


    var son = {
      id: 1,
      kiedy_utworzono: "2019-08-09T16:19:41.571+0000",
      kiedy_zmodyfikowano: "2019-08-09T16:19:41.571+0000",
      nr_dowodu: "xr-9867",
      imie: "Janusz",
      nazwisko: "Korwin-Mikke",
      adres: "Woronicza 16 Warszawa ",
      czy_zarchiwizowany: false,
      data_urodzenia: "1933-02-25",
      pesel: "12345678901"
    };
    var dane = template(son);




    function f1() {
      var noweImie = prompt("jak tam");
      var obywatelDane = "<p>identyfikator to: {{id}}   data utworzenia to:   {{kiedy_utworzono}}   " +
        "data ostatniej modyfikacji to   {{kiedy_zmodyfikowano}}   numer dowodu    {{nr_dowodu}}   imie to   {{imie}}   " +
        "nazwisko to   {{nazwisko}}   adres to   {{adres}}   aktualny to    {{czy_zarchiwizowany}}   " +
        "data urodzenia to    {{data_urodzenia}}   pesel to   {{pesel}}    </p>";

      template = Handlebars.compile(obywatelDane);


      var son = {
        id: 1,
        kiedy_utworzono: "2019-08-09T16:19:41.571+0000",
        kiedy_zmodyfikowano: "2019-08-09T16:19:41.571+0000",
        nr_dowodu: "xr-9867",
        imie: "Janusz",
        nazwisko: "Korwin-Mikke",
        adres: "Woronicza 16 Warszawa ",
        czy_zarchiwizowany: false,
        data_urodzenia: "1933-02-25",
        pesel: "12345678901"
      };
      son.pesel = noweImie;
      document.getElementById("obywatel").innerHTML = "";
      dane = template(son);
      var but2  ="    <button type=\"button\" onclick=\" f1()\">nacisnij</button>"
      var but3  ="    <button type=\"button\" onclick=\" f2()\">edytuj</button>"
      var bancz = (dane +""+ "czesc "+ but2+"<br><br>"+but3);
      document.getElementById('obywatel').innerHTML += bancz;




    }

    var but2  ="    <button type=\"button\" onclick=\" f1()\">nacisnij</button>"


    var but3  ="    <button type=\"button\" onclick=\" f2()\">edytuj</button>"

    function f3(obywatelDane, son){
      son.pesel = document.getElementById("in1").val();
      alert(document.getElementById("in1").val())

      template = Handlebars.compile(obywatelDane);

      document.getElementById("obywatel").innerHTML = "";

      var dane2 = template(son);

      document.getElementById("obywatel").innerHTML += dane2;

    }

    function f2() {

      var obywatelDane = "<p>identyfikator to: {{id}}   data utworzenia to:   {{kiedy_utworzono}}   " +
        "data ostatniej modyfikacji to   {{kiedy_zmodyfikowano}}   numer dowodu    {{nr_dowodu}}   imie to   {{imie}}   " +
        "nazwisko to   {{nazwisko}}   adres to   {{adres}}   aktualny to    {{czy_zarchiwizowany}}   " +
        "data urodzenia to    {{data_urodzenia}}   pesel to   {{pesel}}    </p>";

      template = Handlebars.compile(obywatelDane);


      var son = {
        id: 1,
        kiedy_utworzono: "2019-08-09T16:19:41.571+0000",
        kiedy_zmodyfikowano: "2019-08-09T16:19:41.571+0000",
        nr_dowodu: "xr-9867",
        imie: "Janusz",
        nazwisko: "Korwin-Mikke",
        adres: "Woronicza 16 Warszawa ",
        czy_zarchiwizowany: false,
        data_urodzenia: "1933-02-25",
        pesel: "12345678901"
      };



      var formularz = "<form onsubmit='f3(obywatelDane,son)' id = 'ff'>\n" +
        "    nr dowodu: <br>\n" +
        "    <input type = \"text \" name = \"nr_dowodu\" value =  {{nr_dowodu}} ><br>\n" +
        "    imie: <br>\n" +
        "    <input type = \"text \" name = \"imie\"  value={{imie}}><br>\n" +
        "    nazwisko: <br>\n" +
        "    <input type = \"text \" name = \"nazwisko\" value={{nazwisko}} ><br>\n" +
        "    adres: <br>\n" +
        "    <input type = \"text \" name = \"adres\" value = {{adres}} ><br>\n" +
        "    data urodzenia: <br>\n" +
        "    <input type = \"date \" name = \"data_urodzenia\" value = {{data_urodzenia}}  ><br>\n" +
        "    pesel:<br>\n" +
        "    <input id =\"in1\"type = \"text \" name = \"pesel\" value = {{pesel}}><br><br>\n" +
        "    <input type = \"submit\" value = \"Zatwierdź\" >\n" +
        "\n" +
        "\n" +
        "  </form>";




      template = Handlebars.compile(formularz);

      var dane = template(son);

      document.getElementById("formularz").innerHTML+=dane;

      $("formularz").submit( function (obywatelDane,son) {

        document.getElementById("obywatel").innerHTML = ""

      })






    }











    var bancz = (dane +""+ "czesc "+ but2 + but3);



    document.getElementById('obywatel').innerHTML += bancz;





  </script>


</body>
</html>
